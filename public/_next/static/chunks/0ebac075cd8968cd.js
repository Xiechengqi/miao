(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9165,t=>{"use strict";let a=new class{token=null;constructor(){this.token=localStorage.getItem("miao_token")}setToken(t){this.token=t,localStorage.setItem("miao_token",t)}clearToken(){this.token=null,localStorage.removeItem("miao_token")}async fetch(t,a={}){let e={"Content-Type":"application/json",...a.headers};this.token&&(e.Authorization=`Bearer ${this.token}`);let s=await fetch(`${t}`,{...a,headers:e});if(401===s.status)throw this.clearToken(),window.location.href="/login",Error("Unauthorized");if(!s.ok){let t=await s.json().catch(()=>({error:s.statusText}));throw Error(t?.error||`API Error: ${s.statusText}`)}return s.json()}async login(t){let a=await this.fetch("/api/login",{method:"POST",body:JSON.stringify({password:t})});return this.setToken(a.data.token),a.data}async setup(t){await this.fetch("/api/setup/init",{method:"POST",body:JSON.stringify({password:t})})}async checkSetupRequired(){return this.fetch("/api/setup/status")}async getStatus(){return(await this.fetch("/api/status")).data}async getSystemInfo(){return(await this.fetch("/api/system/info")).data}async getSystemStatus(){return(await this.fetch("/api/system/status")).data}async getSystemMetrics(t,a){let e=new URLSearchParams({range:t});return a&&e.set("step",a),(await this.fetch(`/api/system/metrics?${e.toString()}`)).data}async startService(){return(await this.fetch("/api/status/start",{method:"POST"})).data}async stopService(){return(await this.fetch("/api/status/stop",{method:"POST"})).data}async getDnsStatus(){return(await this.fetch("/api/dns")).data}async checkDns(){return(await this.fetch("/api/dns/check")).data}async switchDns(t){await this.fetch("/api/dns/switch",{method:"POST",body:JSON.stringify({name:t})})}async getSubFiles(){return(await this.fetch("/api/sub-files")).data}async reloadSubFiles(){await this.fetch("/api/sub-files/reload",{method:"POST"})}async getNodes(){return(await this.fetch("/api/nodes")).data}async getNode(t){return(await this.fetch(`/api/nodes/${encodeURIComponent(t)}`)).data}async createNode(t){await this.fetch("/api/nodes",{method:"POST",body:JSON.stringify(t)})}async updateNode(t,a){await this.fetch(`/api/nodes/${encodeURIComponent(t)}`,{method:"PUT",body:JSON.stringify(a)})}async deleteNode(t){await this.fetch("/api/nodes",{method:"DELETE",body:JSON.stringify({tag:t})})}async testNode(t,a,e=3e3){return(await this.fetch("/api/node-test",{method:"POST",body:JSON.stringify({server:t,server_port:a,timeout_ms:e})})).data}async testConnectivity(t){return(await this.fetch("/api/connectivity",{method:"POST",body:JSON.stringify({url:t})})).data}async getProxies(){return(await this.fetch("/api/clash/proxies")).data}async testDelay(t){return(await this.fetch("/api/clash/delays",{method:"POST",body:JSON.stringify({name:t})})).data}async switchProxy(t,a){await this.fetch("/api/clash/switch",{method:"POST",body:JSON.stringify({group:t,name:a})})}async getSyncs(){return(await this.fetch("/api/syncs")).data}async createSync(t){return(await this.fetch("/api/syncs",{method:"POST",body:JSON.stringify(t)})).data}async updateSync(t,a){await this.fetch(`/api/syncs/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteSync(t){await this.fetch(`/api/syncs/${t}`,{method:"DELETE"})}async startSync(t){await this.fetch(`/api/syncs/${t}/start`,{method:"POST"})}async stopSync(t){await this.fetch(`/api/syncs/${t}/stop`,{method:"POST"})}async testSync(t){await this.fetch(`/api/syncs/${t}/test`,{method:"POST"})}async getTcpTunnels(){return(await this.fetch("/api/tcp-tunnels")).data}async createTcpTunnel(t){return(await this.fetch("/api/tcp-tunnels",{method:"POST",body:JSON.stringify(t)})).data}async updateTcpTunnel(t,a){await this.fetch(`/api/tcp-tunnels/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteTcpTunnel(t){await this.fetch(`/api/tcp-tunnels/${t}`,{method:"DELETE"})}async restartTcpTunnel(t){await this.fetch(`/api/tcp-tunnels/${t}/restart`,{method:"POST"})}async startTcpTunnel(t){await this.fetch(`/api/tcp-tunnels/${t}/start`,{method:"POST"})}async stopTcpTunnel(t){await this.fetch(`/api/tcp-tunnels/${t}/stop`,{method:"POST"})}async testTcpTunnel(t){await this.fetch(`/api/tcp-tunnels/${t}/test`,{method:"POST"})}async copyTcpTunnel(t){await this.fetch(`/api/tcp-tunnels/${t}/copy`,{method:"POST"})}async getTerminals(){return(await this.fetch("/api/terminals")).data}async createTerminal(t){return(await this.fetch("/api/terminals",{method:"POST",body:JSON.stringify(t)})).data}async updateTerminal(t,a){await this.fetch(`/api/terminals/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteTerminal(t){await this.fetch(`/api/terminals/${t}`,{method:"DELETE"})}async startTerminal(t){await this.fetch(`/api/terminals/${t}/start`,{method:"POST"})}async stopTerminal(t){await this.fetch(`/api/terminals/${t}/stop`,{method:"POST"})}async restartTerminal(t){await this.fetch(`/api/terminals/${t}/restart`,{method:"POST"})}async upgradeGotty(){await this.fetch("/api/terminals/upgrade",{method:"POST"})}async getVncSessions(){return(await this.fetch("/api/vnc-sessions")).data}async createVncSession(t){return(await this.fetch("/api/vnc-sessions",{method:"POST",body:JSON.stringify(t)})).data}async updateVncSession(t,a){await this.fetch(`/api/vnc-sessions/${t}`,{method:"PUT",body:JSON.stringify(a)})}async deleteVncSession(t){await this.fetch(`/api/vnc-sessions/${t}`,{method:"DELETE"})}async startVncSession(t){await this.fetch(`/api/vnc-sessions/${t}/start`,{method:"POST"})}async stopVncSession(t){await this.fetch(`/api/vnc-sessions/${t}/stop`,{method:"POST"})}async restartVncSession(t){await this.fetch(`/api/vnc-sessions/${t}/restart`,{method:"POST"})}async getApps(){return(await this.fetch("/api/apps")).data}async getAppTemplates(){return(await this.fetch("/api/apps/templates")).data}async createApp(t){return(await this.fetch("/api/apps",{method:"POST",body:JSON.stringify(t)})).data}async updateApp(t,a){await this.fetch(`/api/apps/${t}`,{method:"PUT",body:JSON.stringify(a)})}async startApp(t){await this.fetch(`/api/apps/${t}/start`,{method:"POST"})}async stopApp(t){await this.fetch(`/api/apps/${t}/stop`,{method:"POST"})}async restartApp(t){await this.fetch(`/api/apps/${t}/restart`,{method:"POST"})}async deleteApp(t){await this.fetch(`/api/apps/${t}`,{method:"DELETE"})}async checkUpdate(){return(await this.fetch("/api/update")).data}async performUpdate(){await this.fetch("/api/update",{method:"POST"})}async reloadSubscription(){await this.fetch("/api/clash/reload",{method:"POST"})}async getLogs(){return(await this.fetch("/api/logs")).data}};function e(){let t=localStorage.getItem("miao_token");if(!t)throw Error("No authentication token found. Please login first.");let a="".replace("http","ws");return`${a}/api/clash/ws/traffic?token=${t}`}function s(){let t=localStorage.getItem("miao_token");if(!t)throw Error("No authentication token found. Please login first.");let a="".replace("http","ws");return`${a}/api/clash/ws/logs?token=${t}`}t.s(["api",0,a,"getLogsWsUrl",()=>s,"getTrafficWsUrl",()=>e])},87208,(t,a,e)=>{a.exports=t.r(30204)},94542,t=>{"use strict";var a=t.i(87519),e=t.i(86646),s=t.i(87208);t.i(16787);var i=t.i(2163),n=t.i(50736),c=t.i(82291),r=t.i(9165);let h=(0,t.i(98631).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var o=t.i(56625);function d(){let t=(0,s.useRouter)(),[d,p]=(0,e.useState)(""),[l,y]=(0,e.useState)(!1),[f,u]=(0,e.useState)(""),m=async a=>{a.preventDefault(),u(""),y(!0);try{await r.api.login(d),t.push("/dashboard")}catch(t){u(t instanceof Error?t.message:"登录失败")}finally{y(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:[(0,a.jsx)(c.ClayBlobs,{}),(0,a.jsx)("div",{className:"relative w-full max-w-md",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-[0_20px_50px_-12px_rgba(79,70,229,0.25)] border border-slate-100 p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-xl bg-gradient-to-r from-indigo-600 to-violet-600 shadow-[0_4px_14px_0_rgba(79,70,229,0.3)] mb-4",children:(0,a.jsx)(h,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-extrabold text-slate-900",children:"Miao 登录"}),(0,a.jsx)("p",{className:"mt-2 text-slate-500",children:"请输入密码访问控制面板"})]}),(0,a.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)(n.Input,{type:"password",placeholder:"请输入密码",value:d,onChange:t=>p(t.target.value),disabled:l,autoFocus:!0})}),f&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-red-50 border border-red-100 text-red-700 text-sm",children:[(0,a.jsx)(o.AlertCircle,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{children:f})]}),(0,a.jsx)(i.Button,{type:"submit",className:"w-full",loading:l,disabled:!d||l,children:"登录"})]})]})})]})}t.s(["default",()=>d],94542)}]);