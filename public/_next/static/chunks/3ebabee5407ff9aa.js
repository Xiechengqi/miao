(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96493,e=>{"use strict";let s=(0,e.i(98631).default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);e.s(["Cpu",()=>s],96493)},30257,e=>{"use strict";var s=e.i(87519),t=e.i(86646),l=e.i(9165),a=e.i(1257),i=e.i(96493),r=e.i(98631);let d=(0,r.default)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),n=(0,r.default)("memory-stick",[["path",{d:"M12 12v-2",key:"fwoke6"}],["path",{d:"M12 18v-2",key:"qj6yno"}],["path",{d:"M16 12v-2",key:"heuere"}],["path",{d:"M16 18v-2",key:"s1ct0w"}],["path",{d:"M2 11h1.5",key:"15p63e"}],["path",{d:"M20 18v-2",key:"12ehxp"}],["path",{d:"M20.5 11H22",key:"khsy7a"}],["path",{d:"M4 18v-2",key:"1c3oqr"}],["path",{d:"M8 12v-2",key:"1mwtfd"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["rect",{x:"2",y:"6",width:"20",height:"10",rx:"2",key:"1qcswk"}]]);var c=e.i(1836),x=e.i(26791);let m=["B","KB","MB","GB","TB","PB"];function h(e,s=1){if(!Number.isFinite(e))return"-";if(0===e)return"0 B";let t=Math.min(Math.floor(Math.log(e)/Math.log(1024)),m.length-1),l=e/Math.pow(1024,t);return`${l.toFixed(s)} ${m[t]}`}function o(e){return null==e||Number.isNaN(e)?"-":`${Math.round(e)}%`}function p({info:e,status:t}){let l=function(e){if(e&&0!==e.graphics.length)return e.graphics.reduce((e,s)=>e+s.gpu,0)/e.graphics.length}(t),a=t&&0!==t.disks.length?{used:t.disks[0].used,total:t.disks[0].total}:null,r=t?function(e,s=1){return h(1024*e,s)}(t.memoryUsedKb):"-",m=e?h(e.memory):"-",p=a?h(a.used):"-",u=a?h(a.total):"-";return(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[(0,s.jsx)(x.Card,{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"CPU 使用率"}),(0,s.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:o(t?.cpuPercent)})]}),(0,s.jsx)("div",{className:"rounded-lg bg-indigo-50 p-3 text-indigo-600",children:(0,s.jsx)(i.Cpu,{className:"h-5 w-5"})})]})}),(0,s.jsx)(x.Card,{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"内存使用"}),(0,s.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:r}),(0,s.jsxs)("p",{className:"text-xs text-slate-400",children:["总计 ",m]})]}),(0,s.jsx)("div",{className:"rounded-lg bg-emerald-50 p-3 text-emerald-600",children:(0,s.jsx)(n,{className:"h-5 w-5"})})]})}),(0,s.jsx)(x.Card,{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"GPU 使用率"}),(0,s.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:o(l)}),void 0===l&&(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"未检测到 GPU"})]}),(0,s.jsx)("div",{className:"rounded-lg bg-purple-50 p-3 text-purple-600",children:(0,s.jsx)(c.Monitor,{className:"h-5 w-5"})})]})}),(0,s.jsx)(x.Card,{className:"p-5",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"磁盘使用"}),(0,s.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:p}),(0,s.jsxs)("p",{className:"text-xs text-slate-400",children:["总计 ",u]})]}),(0,s.jsx)("div",{className:"rounded-lg bg-amber-50 p-3 text-amber-600",children:(0,s.jsx)(d,{className:"h-5 w-5"})})]})})]})}function u({info:e,status:t}){let l=new Map(e?.graphics.map(e=>[e.id,e])??[]),a=t?.graphics??[];return(0,s.jsxs)(x.Card,{className:"p-5",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"GPU"}),(0,s.jsxs)("div",{className:"mt-4 space-y-4",children:[0===a.length&&(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"未检测到 GPU"}),a.map(e=>{let t=l.get(e.id);return(0,s.jsxs)("div",{className:"rounded-lg border border-slate-100 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:t?.name||e.id}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:t?.brand})]}),(0,s.jsxs)("span",{className:"text-sm text-slate-500",children:[e.temperature,"°C"]})]}),(0,s.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-slate-600",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"GPU 使用率"}),(0,s.jsx)("p",{className:"font-medium",children:o(e.gpu)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"显存占用"}),(0,s.jsx)("p",{className:"font-medium",children:h(e.memoryUsed)})]})]})]},e.id)})]})]})}function j({info:e,status:t}){let l=t?.disks??[],a=new Map(e?.disks.map(e=>[e.name,e])??[]);return(0,s.jsxs)(x.Card,{className:"p-5",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"磁盘"}),(0,s.jsxs)("div",{className:"mt-4 space-y-4",children:[0===l.length&&(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"暂无磁盘信息"}),l.map(e=>{let t=e.total||0,l=e.used||0,i=t>0?Math.round(l/t*100):0,r=a.get(e.name);return(0,s.jsxs)("div",{className:"rounded-lg border border-slate-100 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:r?.mountPoint||e.name}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:r?.fs})]}),(0,s.jsxs)("span",{className:"text-sm text-slate-500",children:[i,"%"]})]}),(0,s.jsx)("div",{className:"mt-3 h-2 w-full rounded-full bg-slate-100",children:(0,s.jsx)("div",{className:"h-2 rounded-full bg-indigo-500",style:{width:`${i}%`}})}),(0,s.jsxs)("p",{className:"mt-2 text-xs text-slate-400",children:[h(l)," / ",h(t)]})]},e.name)})]})]})}function f({info:e}){return e?(0,s.jsxs)(x.Card,{className:"p-5",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"系统信息"}),(0,s.jsxs)("div",{className:"mt-4 grid gap-3 text-sm text-slate-600 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"主机名"}),(0,s.jsx)("p",{className:"font-medium",children:e.hostname})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"系统版本"}),(0,s.jsxs)("p",{className:"font-medium",children:[e.osName," ",e.osVersion]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"内核版本"}),(0,s.jsx)("p",{className:"font-medium",children:e.kernelVersion})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"CPU 型号"}),(0,s.jsx)("p",{className:"font-medium",children:e.processor?.brand})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"CPU 核心"}),(0,s.jsx)("p",{className:"font-medium",children:e.totalProcessors})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"内存总量"}),(0,s.jsx)("p",{className:"font-medium",children:h(e.memory)})]})]})]}):null}function N(e,s,t){return 0===e.length?"":e.map((l,a)=>{let i=a/Math.max(e.length-1,1)*s;return`${i},${t-l/100*t}`}).join(" ")}function g({series:e,memoryTotalBytes:t}){let l=e.map(e=>e.cpuPercent),a=e.some(e=>void 0!==e.gpuPercent),i=e.map(e=>e.gpuPercent??0),r=e.map(e=>t?Math.min(100,Math.round(1024*e.memoryUsedKb*100/t)):0),d=e.map(e=>0===e.diskTotalBytes?0:Math.min(100,Math.round(100*e.diskUsedBytes/e.diskTotalBytes))),n=e.length>1;return(0,s.jsxs)(x.Card,{className:"p-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"性能趋势"}),(0,s.jsxs)("div",{className:"flex gap-3 text-xs text-slate-500",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-indigo-500"}),"CPU"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"内存"]}),a&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-purple-500"}),"GPU"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-amber-500"}),"磁盘"]})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[!n&&(0,s.jsx)("div",{className:"rounded-lg border border-dashed border-slate-200 py-8 text-center text-sm text-slate-500",children:"暂无趋势数据"}),n&&(0,s.jsxs)("svg",{viewBox:"0 0 600 160",className:"h-40 w-full",preserveAspectRatio:"none",children:[(0,s.jsx)("polyline",{fill:"none",stroke:"#6366F1",strokeWidth:"2",points:N(l,600,160)}),(0,s.jsx)("polyline",{fill:"none",stroke:"#10B981",strokeWidth:"2",points:N(r,600,160)}),(0,s.jsx)("polyline",{fill:"none",stroke:"#A855F7",strokeWidth:"2",points:N(i,600,160),style:{display:a?"block":"none"}}),(0,s.jsx)("polyline",{fill:"none",stroke:"#F59E0B",strokeWidth:"2",points:N(d,600,160)})]})]})]})}let y=["15m","1h","6h","24h","7d"];function v(){let{addToast:e}=(0,a.useStore)(),[i,r]=(0,t.useState)(null),[d,n]=(0,t.useState)(null),[c,x]=(0,t.useState)(null),[m,h]=(0,t.useState)("1h"),[o,N]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let s=!0;return(async()=>{try{let[e,t]=await Promise.all([l.api.getSystemInfo(),l.api.getSystemStatus()]);if(!s)return;r(e),n(t)}catch(t){s&&e({type:"error",message:"获取系统信息失败"})}finally{s&&N(!1)}})(),()=>{s=!1}},[e]),(0,t.useEffect)(()=>{let s=!0,t=setInterval(async()=>{try{let e=await l.api.getSystemStatus();s&&n(e)}catch(t){s&&e({type:"error",message:"刷新系统状态失败"})}},5e3);return()=>{s=!1,clearInterval(t)}},[e]),(0,t.useEffect)(()=>{let s=!0;return(async()=>{try{let e=await l.api.getSystemMetrics(m);s&&x(e)}catch(t){s&&e({type:"error",message:"获取趋势数据失败"})}})(),()=>{s=!1}},[e,m]);let v=(0,t.useMemo)(()=>d?new Date(1e3*d.timestamp).toLocaleTimeString():"-",[d]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"性能总览"}),(0,s.jsxs)("p",{className:"text-sm text-slate-500",children:["最后更新：",v]})]}),o&&(0,s.jsx)("span",{className:"rounded-full bg-indigo-50 px-3 py-1 text-xs text-indigo-600",children:"加载中..."})]}),(0,s.jsx)(p,{info:i,status:d}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-700",children:"趋势区间"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map(e=>(0,s.jsx)("button",{onClick:()=>h(e),className:`rounded-full border px-3 py-1 text-xs transition ${m===e?"border-indigo-500 bg-indigo-50 text-indigo-600":"border-slate-200 text-slate-500 hover:border-indigo-200 hover:text-indigo-600"}`,children:e},e))})]}),(0,s.jsx)(g,{series:c?.series??[],memoryTotalBytes:i?.memory})]}),(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsx)(u,{info:i,status:d}),(0,s.jsx)(j,{info:i,status:d})]}),(0,s.jsx)(f,{info:i})]})}e.s(["default",()=>v],30257)}]);