(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14136,e=>{"use strict";let s=(0,e.i(98631).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>s],14136)},43293,611,e=>{"use strict";var s=e.i(98631);let a=(0,s.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],43293);let t=(0,s.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],611)},66974,e=>{"use strict";let s=(0,e.i(98631).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>s],66974)},5300,e=>{"use strict";let s=(0,e.i(98631).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>s],5300)},24392,e=>{"use strict";let s=(0,e.i(98631).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>s],24392)},96493,e=>{"use strict";let s=(0,e.i(98631).default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);e.s(["Cpu",()=>s],96493)},5385,e=>{"use strict";var s=e.i(87519),a=e.i(86646);e.i(16787);var t=e.i(26791),l=e.i(2163),r=e.i(63917),i=e.i(55794),n=e.i(67559),c=e.i(50736),d=e.i(1257);e.i(64485);var o=e.i(20195),m=e.i(75354),x=e.i(91310),h=e.i(9165),p=e.i(75157),u=e.i(66974),g=e.i(5300),y=e.i(98631);let f=(0,y.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var v=e.i(24392);let j=(0,y.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var b=e.i(96493);let N=(0,y.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);var w=e.i(43293),k=e.i(611),C=e.i(14136);let _=(0,y.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),M=(0,y.default)("arrow-down-up",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]),S=(0,y.default)("bolt",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]),B=["2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm","2022-blake3-chacha20-poly1305","aes-128-gcm","aes-256-gcm","chacha20-ietf-poly1305"],z=[{name:"Google",url:"https://www.google.com"},{name:"GitHub",url:"https://github.com"},{name:"YouTube",url:"https://www.youtube.com"},{name:"Twitter",url:"https://x.com"},{name:"Telegram",url:"https://telegram.org"},{name:"OpenAI",url:"https://openai.com"}],T={tag:"",server:"",server_port:"443",user:"",password:"",sni:"",cipher:"2022-blake3-aes-128-gcm"};function $(){let{setLoading:e,loading:y,addToast:$,proxyGroups:E,setProxyGroups:A,setNodes:P,delays:H,setStatus:I,setDnsStatus:L}=(0,d.useStore)(),{fetchProxies:O,testAllDelays:R,switchProxy:D,testDelay:F}=(0,o.useProxies)(),{status:Z,dnsStatus:U,loadingAction:V,checkDnsNow:q,switchDnsActive:G,toggleService:K}=(0,m.useStatus)(),{traffic:W}=(0,x.useTraffic)(),[Y,J]=(0,a.useState)(""),[Q,X]=(0,a.useState)(null),[ee,es]=(0,a.useState)(!1),[ea,et]=(0,a.useState)([]),[el,er]=(0,a.useState)(!1),[ei,en]=(0,a.useState)(!1),[ec,ed]=(0,a.useState)(null),[eo,em]=(0,a.useState)(""),[ex,eh]=(0,a.useState)(!1),[ep,eu]=(0,a.useState)(null),[eg,ey]=(0,a.useState)("hysteria2"),[ef,ev]=(0,a.useState)(T),[ej,eb]=(0,a.useState)({}),[eN,ew]=(0,a.useState)(!1),[ek,eC]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{e(!0,"init");try{let[e,s,{proxies:a,nodes:t}]=await Promise.all([h.api.getStatus(),h.api.getDnsStatus().catch(()=>null),h.api.getProxies()]);I(e),s&&L(s),A(a),P(t)}catch(e){console.error("Failed to load data:",e),$({type:"error",message:"加载数据失败"})}finally{e(!1)}})(),ez(),e$()},[]),(0,a.useEffect)(()=>{!eo&&U?.candidates?.length&&em(U.active||U.candidates[0])},[U,eo]);let e_=(0,a.useMemo)(()=>ef.tag.trim()&&ef.server.trim()&&Number(ef.server_port)>0,[ef]),eM=async e=>{let s=await F(e);void 0!==s&&$({type:"success",message:`${e}: ${s}ms`})},eS=(0,a.useMemo)(()=>{let e={};for(let[s,a]of Object.entries(E))"Selector"!==a.type||s.startsWith("_")||(e[s]=a);return e},[E]),eB=async()=>{e(!0,"reload");try{await h.api.reloadSubscription(),$({type:"success",message:"配置已重载"}),O()}catch(e){$({type:"error",message:e instanceof Error?e.message:"重载失败"})}finally{e(!1)}},ez=async()=>{try{let e=await h.api.getSubFiles();X(e)}catch(e){$({type:"error",message:"获取订阅文件失败"})}finally{es(!0)}},eT=async()=>{e(!0,"reloadSubFiles");try{await h.api.reloadSubFiles(),$({type:"success",message:"订阅文件已重载"}),ez()}catch(e){$({type:"error",message:e instanceof Error?e.message:"重载失败"})}finally{e(!1)}},e$=async()=>{try{let e=await h.api.getNodes();et(e)}catch(e){$({type:"error",message:"获取节点失败"})}finally{er(!0)}},eE=async s=>{e(!0,"node-edit");try{let e=await h.api.getNode(s);eu(s),ey("shadowsocks"===e.node_type?"ss":e.node_type),ev({tag:e.tag,server:e.server,server_port:e.server_port?.toString()||"",user:e.user||"",password:"",sni:e.sni||"",cipher:e.cipher||"2022-blake3-aes-128-gcm"}),eh(!0)}catch(e){$({type:"error",message:e instanceof Error?e.message:"加载节点失败"})}finally{e(!1)}},eA=async(s,a)=>{e(!0,"node-test");try{let e=await h.api.testNode(s,a);$({type:"success",message:`连接成功 (${e.latency_ms}ms)`})}catch(e){$({type:"error",message:e instanceof Error?e.message:"测试失败"})}finally{e(!1)}},eP=async e=>{if(Z.running){let s=await F(e.tag);return void 0===s?void $({type:"error",message:"测试失败"}):void $({type:s>0?"success":"error",message:s>0?`延迟 ${s}ms`:"测试超时"})}eA(e.server,e.server_port)},eH=async s=>{if(confirm(`确定要删除节点 "${s}" 吗？`)){e(!0,"node-delete");try{await h.api.deleteNode(s),$({type:"success",message:"节点已删除"}),e$()}catch(e){$({type:"error",message:e instanceof Error?e.message:"删除失败"})}finally{e(!1)}}},eI=async()=>{if(e_){e(!0,"node-save");try{let e={tag:ef.tag.trim(),node_type:"ss"===eg?"shadowsocks":eg,server:ef.server.trim(),server_port:Number(ef.server_port)};"ssh"===eg&&(e.user=ef.user.trim()),"ss"===eg&&(e.cipher=ef.cipher),("hysteria2"===eg||"anytls"===eg)&&ef.sni.trim()&&(e.sni=ef.sni.trim()),ef.password.trim()&&(e.password=ef.password.trim()),ep?(await h.api.updateNode(ep,e),$({type:"success",message:"节点已更新"})):(await h.api.createNode(e),$({type:"success",message:"节点已添加"})),eh(!1),e$()}catch(e){$({type:"error",message:e instanceof Error?e.message:"保存失败"})}finally{e(!1)}}},eL=async e=>{if(!ek){eC(e.name);try{let s=await h.api.testConnectivity(e.url);eb(a=>({...a,[e.name]:s}))}catch{eb(s=>({...s,[e.name]:{success:!1}}))}finally{eC(null)}}},eO=async()=>{if(eN)return;ew(!0);let e={};for(let s of z){eC(s.name);try{let a=await h.api.testConnectivity(s.url);e[s.name]=a}catch{e[s.name]={success:!1}}}eb(e),eC(null),ew(!1)},eR=async(e,s)=>{if(!ec){for(let a of(ed(e),s))await F(a);ed(null),$({type:"success",message:"测速完成"})}},eD=async(e,s)=>{let a=s.map(e=>({name:e,delay:H[e]})).filter(e=>"number"==typeof e.delay&&e.delay>0);if(0===a.length)return void $({type:"warning",message:"没有可用的测速结果"});let t=a.reduce((e,s)=>s.delay<e.delay?s:e);await D(e,t.name)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-black",children:"代理管理"}),(0,s.jsx)("p",{className:"text-slate-500 mt-1",children:"节点列表与延迟测试"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)(l.Button,{variant:"secondary",onClick:eB,loading:y,children:[(0,s.jsx)(u.RefreshCw,{className:"w-4 h-4"}),"重载配置"]}),(0,s.jsxs)(l.Button,{onClick:R,loading:y,children:[(0,s.jsx)(g.Zap,{className:"w-4 h-4"}),"测试延迟"]})]})]}),(0,s.jsxs)(t.Card,{className:"p-4",children:[(0,s.jsxs)(t.CardHeader,{className:"mb-3",children:[(0,s.jsx)(v.Activity,{className:"w-5 h-5 text-indigo-600"}),(0,s.jsx)("span",{className:"text-lg font-bold text-slate-900",children:"Sing-box 状态"}),(0,s.jsx)("div",{className:"ml-auto flex items-center gap-3",children:(0,s.jsx)(i.TogglePower,{running:Z.running,loading:y&&("start"===V||"stop"===V),onToggle:K,size:"md"})})]}),(0,s.jsxs)(t.CardContent,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsx)(r.Badge,{variant:Z.running?"success":"error",dot:!0,children:Z.running?"运行中":"已停止"}),Z.running&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-2.5 py-1 rounded-lg bg-slate-100 text-xs",children:[(0,s.jsx)(b.Cpu,{className:"w-3.5 h-3.5 text-slate-600"}),(0,s.jsx)("span",{className:"font-mono",children:Z.pid||"-"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-2.5 py-1 rounded-lg bg-slate-100 text-xs",children:[(0,s.jsx)(j,{className:"w-3.5 h-3.5 text-slate-600"}),(0,s.jsx)("span",{className:"font-mono",children:(0,p.formatUptime)(Z.uptime_secs)})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-2.5 py-1 rounded-lg bg-slate-100 text-xs",children:[(0,s.jsx)(N,{className:"w-3.5 h-3.5 text-slate-600"}),(0,s.jsx)("span",{children:U?.active||"-"})]}),(0,s.jsx)("button",{onClick:q,disabled:y||"dns-check"===V,className:"p-1.5 rounded-lg bg-slate-100 hover:bg-slate-200 transition-colors",title:"刷新 DNS",children:(0,s.jsx)(u.RefreshCw,{className:`w-3.5 h-3.5 ${"dns-check"===V?"animate-spin":""}`})})]}),U?.candidates&&U.candidates.length>0&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-100 space-y-3",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[(0,s.jsx)("select",{className:"h-9 rounded-lg border border-slate-200 bg-white px-3 text-sm text-slate-700",value:eo,onChange:e=>em(e.target.value),children:U.candidates.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(l.Button,{variant:"secondary",size:"sm",onClick:()=>G(eo),loading:"dns-switch"===V,disabled:!eo,children:"切换 DNS"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[U.candidates.map(e=>{let a=U.health?.[e];return(0,s.jsx)(r.Badge,{variant:"ok"===a?"success":"bad"===a?"error":"cooldown"===a?"warning":"default",children:(0,s.jsx)("span",{title:a?`${e} (${a})`:e,children:e})},e)}),void 0!==U.last_check_secs_ago&&null!==U.last_check_secs_ago&&(0,s.jsxs)("span",{className:"text-xs text-slate-500",children:[U.last_check_secs_ago,"s ago"]})]})]})]})]}),Z.running&&(0,s.jsxs)(t.Card,{className:"p-6",hoverEffect:!1,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"HTTPS 连通性测试"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"测试代理对外站点可用性"})]}),(0,s.jsxs)(l.Button,{variant:"secondary",onClick:eO,loading:eN,children:[(0,s.jsx)(_,{className:"w-4 h-4"}),"测试连接"]})]}),(0,s.jsx)("div",{className:"mt-6 grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:z.map(e=>{let a=ej[e.name],t=ek===e.name,l=eN&&ek!==e.name&&!ej[e.name];return(0,s.jsxs)("button",{onClick:()=>eL(e),disabled:!!ek||eN,className:"flex items-center justify-between rounded-lg border border-slate-100 bg-white px-4 py-3 text-left hover:border-indigo-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-slate-500",children:e.url})]}),(0,s.jsx)(r.Badge,{variant:a?a.success?300>(a.latency_ms||0)?"success":800>(a.latency_ms||0)?"warning":"error":"error":"default",children:t?"测试中":l?"等待中":a?a.success?`${a.latency_ms}ms`:"超时":"-"})]},e.name)})})]}),Z.running&&(0,s.jsxs)(t.Card,{className:"p-6",hoverEffect:!1,children:[(0,s.jsx)(t.CardHeader,{className:"mb-3",children:(0,s.jsx)("span",{className:"text-lg font-bold text-slate-900",children:"节点选择"})}),0===Object.keys(eS).length?(0,s.jsx)("div",{className:"text-center py-8 text-slate-500",children:"正在加载节点..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative mb-4",children:[(0,s.jsx)(f,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),(0,s.jsx)("input",{type:"text",placeholder:"搜索节点...",value:Y,onChange:e=>J(e.target.value),className:"w-full h-12 pl-12 pr-4 rounded-lg bg-white border border-slate-200 shadow-sm border-0 outline-none focus:bg-white focus:shadow-[0_4px_20px_-2px_rgba(79,70,229,0.1)] focus:ring-4 focus:ring-indigo-500/20 transition-all"}),Y&&(0,s.jsx)("button",{onClick:()=>J(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs text-slate-500",children:"清除"})]}),Object.entries(eS).map(([e,a])=>{var t;let r="proxy"===e?"选中节点":e,i=(t=(e=>{if(!Y.trim())return e;let s=Y.trim().toLowerCase();return e.filter(e=>e.toLowerCase().includes(s))})(a.all),ei?[...t].sort((e,s)=>{let a=H[e],t=H[s];return(a&&a>0?a:1/0)-(t&&t>0?t:1/0)}):t);return(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-base font-semibold text-slate-900",children:r}),a.now&&(0,s.jsxs)("span",{className:"text-xs text-slate-500",children:["当前: ",a.now]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(l.Button,{variant:ei?"primary":"secondary",size:"sm",onClick:()=>en(e=>!e),children:[(0,s.jsx)(M,{className:"w-4 h-4"}),"排序"]}),(0,s.jsxs)(l.Button,{variant:"secondary",size:"sm",onClick:()=>eD(e,i),disabled:0===i.length,children:[(0,s.jsx)(S,{className:"w-4 h-4"}),"最快"]}),(0,s.jsxs)(l.Button,{variant:"secondary",size:"sm",onClick:()=>eR(e,i),loading:ec===e,disabled:0===i.length,children:[(0,s.jsx)(g.Zap,{className:"w-4 h-4"}),"测速"]})]})]}),(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:i.map(t=>{let l=a.now===t,r=H[t];return(0,s.jsxs)("button",{onClick:()=>D(e,t),onContextMenu:e=>{e.preventDefault(),eM(t)},className:`group flex items-center gap-2 rounded-lg border px-3 py-2 text-left transition-all ${l?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white hover:border-slate-300 hover:bg-slate-50"}`,children:[(0,s.jsx)("span",{className:"max-w-[140px] truncate text-sm font-medium",title:t,children:t}),void 0!==r&&(0,s.jsx)("span",{className:`text-xs font-mono ${(0,p.getDelayClass)(r)}`,children:0===r?"超时":(0,p.getDelayText)(r)})]},t)})}),Y&&0===i.length&&(0,s.jsx)("div",{className:"mt-3 text-sm text-slate-500",children:"没有匹配的节点"})]},e)}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(g.Zap,{className:"w-4 h-4 text-emerald-600"}),(0,s.jsx)("span",{className:"font-mono",children:(0,p.formatSpeed)(W.up)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(u.RefreshCw,{className:"w-4 h-4 text-sky-600"}),(0,s.jsx)("span",{className:"font-mono",children:(0,p.formatSpeed)(W.down)})]})]})]})]}),(0,s.jsxs)(t.Card,{className:"p-6",hoverEffect:!1,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"订阅文件"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"管理 sing-box 订阅文件"})]}),(0,s.jsxs)(l.Button,{variant:"secondary",onClick:eT,loading:y,children:[(0,s.jsx)(u.RefreshCw,{className:"w-4 h-4"}),"重载"]})]}),(0,s.jsx)("div",{className:"mt-6",children:ee?Q?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-sm text-slate-600 space-y-1",children:[(0,s.jsxs)("div",{children:["目录：",(0,s.jsx)("span",{className:"font-mono",children:Q.sub_dir||"-"})]}),Q.sub_source&&(0,s.jsxs)("div",{children:["来源：","git"===Q.sub_source.type&&(0,s.jsx)("span",{className:"font-mono ml-1",children:Q.sub_source.url}),"path"===Q.sub_source.type&&(0,s.jsx)("span",{className:"font-mono ml-1",children:Q.sub_source.value})]}),Q.error&&(0,s.jsx)("div",{className:"text-red-600",children:Q.error})]}),0===Q.files.length?(0,s.jsx)("div",{className:"text-center py-8 text-slate-500",children:"目录下暂无订阅文件"}):(0,s.jsx)("div",{className:"space-y-3",children:Q.files.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 bg-slate-50 px-4 py-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900",children:e.file_name}),(0,s.jsxs)("div",{className:"text-xs text-slate-500",children:[e.node_count," 节点 · ",e.loaded?"已加载":`跳过：${e.error||"解析失败"}`]})]}),(0,s.jsx)(r.Badge,{variant:e.loaded?"success":"warning",children:e.loaded?"已加载":"未加载"})]},e.file_path))})]}):(0,s.jsx)("div",{className:"text-center py-10",children:(0,s.jsx)("p",{className:"text-slate-500",children:"订阅文件不可用"})}):(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("div",{className:"w-10 h-10 border-4 border-indigo-600/30 border-t-indigo-600 rounded-full animate-spin mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-slate-500",children:"加载中..."})]})})]}),(0,s.jsxs)(t.Card,{className:"p-6",hoverEffect:!1,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"手动节点"}),(0,s.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"管理手动添加的节点"})]}),(0,s.jsxs)(l.Button,{onClick:()=>{eu(null),ey("hysteria2"),ev(T),eh(!0)},children:[(0,s.jsx)(w.Plus,{className:"w-4 h-4"}),"添加节点"]})]}),(0,s.jsx)("div",{className:"mt-6",children:el?0===ea.length?(0,s.jsx)("div",{className:"text-center py-8 text-slate-500",children:"暂无手动节点"}):(0,s.jsx)("div",{className:"space-y-3",children:ea.map(e=>{var a;return(0,s.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg border border-slate-100 bg-white px-4 py-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-semibold text-slate-900",children:e.tag}),(0,s.jsx)(r.Badge,{variant:"info",children:"hysteria2"===(a=e.node_type)?"Hysteria2":"anytls"===a?"AnyTLS":"shadowsocks"===a?"SS":"ssh"===a?"SSH":a})]}),(0,s.jsxs)("div",{className:"text-sm text-slate-500 mt-1",children:[e.server,":",e.server_port,e.sni&&(0,s.jsxs)("span",{className:"ml-2",children:["SNI: ",e.sni]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(l.Button,{variant:"secondary",size:"sm",onClick:()=>eP(e),loading:y,children:[(0,s.jsx)(g.Zap,{className:"w-4 h-4"}),"测试"]}),(0,s.jsxs)(l.Button,{variant:"ghost",size:"sm",onClick:()=>eE(e.tag),children:[(0,s.jsx)(k.Pencil,{className:"w-4 h-4"}),"编辑"]}),(0,s.jsxs)(l.Button,{variant:"ghost",size:"sm",onClick:()=>eH(e.tag),children:[(0,s.jsx)(C.Trash2,{className:"w-4 h-4 text-red-500"}),"删除"]})]})]},e.tag)})}):(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("div",{className:"w-10 h-10 border-4 border-indigo-600/30 border-t-indigo-600 rounded-full animate-spin mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-slate-500",children:"加载中..."})]})})]}),(0,s.jsx)(n.Modal,{isOpen:ex,onClose:()=>eh(!1),title:ep?"编辑节点":"添加节点",size:"lg",children:(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:["hysteria2","anytls","ss","ssh"].map(e=>(0,s.jsx)("button",{onClick:()=>ey(e),className:`px-4 py-2 rounded-lg text-sm font-semibold border transition ${eg===e?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-slate-200 text-slate-500 hover:border-indigo-200 hover:text-indigo-600"}`,children:"ss"===e?"Shadowsocks":e.toUpperCase()},e))}),(0,s.jsx)(c.Input,{label:"节点名称",placeholder:"例如: 我的节点",value:ef.tag,onChange:e=>ev({...ef,tag:e.target.value})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,s.jsx)(c.Input,{label:"服务器地址",placeholder:"例如: example.com",value:ef.server,onChange:e=>ev({...ef,server:e.target.value})}),(0,s.jsx)(c.Input,{label:"端口",type:"number",value:ef.server_port,onChange:e=>ev({...ef,server_port:e.target.value})}),"ssh"===eg?(0,s.jsx)(c.Input,{label:"用户名",placeholder:"root",value:ef.user,onChange:e=>ev({...ef,user:e.target.value})}):null]}),"ss"===eg&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"加密方式"}),(0,s.jsx)("select",{value:ef.cipher,onChange:e=>ev({...ef,cipher:e.target.value}),className:"w-full h-11 rounded-lg border border-slate-200 bg-white px-4 text-slate-900 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1",children:B.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),("hysteria2"===eg||"anytls"===eg)&&(0,s.jsx)(c.Input,{label:"SNI (可选)",placeholder:"留空使用服务器地址",value:ef.sni,onChange:e=>ev({...ef,sni:e.target.value})}),(0,s.jsx)(c.Input,{label:"密码",type:"password",placeholder:ep?"留空保持不变":"可选",value:ef.password,onChange:e=>ev({...ef,password:e.target.value})}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-end gap-3 pt-2",children:[(0,s.jsxs)(l.Button,{variant:"secondary",onClick:()=>eA(ef.server.trim(),Number(ef.server_port)),loading:y,disabled:!ef.server.trim()||!ef.server_port,children:[(0,s.jsx)(g.Zap,{className:"w-4 h-4"}),"测试"]}),(0,s.jsx)(l.Button,{variant:"secondary",onClick:()=>eh(!1),children:"取消"}),(0,s.jsx)(l.Button,{onClick:eI,loading:y,disabled:!e_,children:"保存"})]})]})})]})}e.s(["default",()=>$],5385)}]);